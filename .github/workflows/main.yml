name: Wanderlust CI/CD
on: 
   # push: 
   #   branches: main
  #   paths-ignore:
  #     - './.github/workflows/**'

  workflow_dispatch:

permissions:
  id-token: write
  contents: read
  actions: read

jobs:
  run-reusable-workflow:
    name: "Wanderlust CI"
    uses: dhruv-development/reusable_workflows/.github/workflows/wanderlust-ci.yml@main
    with:
      role-assume: "arn:aws:iam::410454990341:role/GitHubActionsRole"
      AWS_REGION: "us-east-2"
      ECR_MONGO_REPO: "dev-mongo"
      ECR_REDIS_REPO: "dev-redis"
      ECR_BACKEND_REPO: "dev-backend"
      ECR_FRONTEND_REPO: "dev-frontend"
      MONGO_TASK_DEFINITION: "Wanderlust-task-mongo"
      REDIS_TASK_DEFINITION: "Wanderlust-task-redis"
      BACKEND_TASK_DEFINITION: "Wanderlust-task-backend"
      FRONTEND_TASK_DEFINITION: "Wanderlust-task-frontend"
      MONGO_SERVICE: "Wanderlust-service-mongo"
      REDIS_SERVICE: "Wanderlust-service-redis"
      BACKEND_SERVICE: "Wanderlust-service-backend"
      FRONTEND_SERVICE: "Wanderlust-service-frontend"
      CLUSTER: "Wanderlust"
